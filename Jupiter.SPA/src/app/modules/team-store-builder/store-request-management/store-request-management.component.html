<div class="filterTabParent">
    <form [formGroup]="filterFormGroup" (ngSubmit)="getStoreRequestList()">
      <div class="row filterTabBar">
        <div class="col-md-3"></div>
        <div class="col-md-3">
          <mat-form-field>
            <mat-label>From</mat-label>
            <input matInput [matDatepicker]="fromPicker" />
            <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
            <mat-datepicker #fromPicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field style="height: 20px">
            <mat-label>To</mat-label>
            <input matInput [matDatepicker]="toPicker" />
            <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
            <mat-datepicker #toPicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <div class="wrapper">
            <img class="search-icon" src="../../../../assets/images/search.png" />
            <input class="search" formControlName="name" placeholder="Search" type="text" />
          </div>
          <button type="submit" class="btn btn-primary" style="height: 0px;width:0px;padding: 0px !important;border: 0px !important;">
          </button>
        </div>
      </div>
    </form>
  </div>
  <br />
  <div class="table-wrapper">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" width="100%">
      <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
  
      <!-- Store Name  Column -->
      <ng-container matColumnDef="storeName">
        <th mat-header-cell *matHeaderCellDef>Store Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>
  
      <!-- Store Owner Column -->
      <ng-container matColumnDef="storeOwner">
        <th mat-header-cell *matHeaderCellDef>Store Owner</th>
        <td mat-cell *matCellDef="let element">{{ element.contactName }}</td>
      </ng-container>
  
      <!-- Order Number Column -->
      <ng-container matColumnDef="orderNumber">
        <th mat-header-cell *matHeaderCellDef>Store Id</th>
        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
      </ng-container>
  
      <!-- Account Manager Column -->
      <ng-container matColumnDef="accountManager">
        <th mat-header-cell *matHeaderCellDef>Account Manager</th>
        <td mat-cell *matCellDef="let element">{{ element.createdBy.name }}</td>
      </ng-container>

      <!-- Created Date Column -->
      <ng-container matColumnDef="createdDate">
        <th mat-header-cell *matHeaderCellDef>Created Date</th>
        <td mat-cell *matCellDef="let element">{{ element.createdDate | date:'MM/dd/yyyy hh:mm a' }}</td>
      </ng-container>

      <!-- Open Date Column -->
      <ng-container matColumnDef="openDate">
        <th mat-header-cell *matHeaderCellDef>Open Date</th>
        <td mat-cell *matCellDef="let element">{{ element.openDate | date:'MM/dd/yyyy hh:mm a' }}</td>
      </ng-container>

      <!-- Close Date Column -->
      <ng-container matColumnDef="closeDate">
        <th mat-header-cell *matHeaderCellDef>Close Date</th>
        <td mat-cell *matCellDef="let element">{{ element.closeDate | date:'MM/dd/yyyy hh:mm a' }}</td>
      </ng-container>

      <ng-container matColumnDef="dueDate">
        <th mat-header-cell *matHeaderCellDef>Due Date</th>
        <td mat-cell *matCellDef="let element">{{ element.dueTime | date:'MM/dd/yyyy hh:mm a' }}</td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef >Status</th>
        <td mat-cell *matCellDef="let element" [ngSwitch]="element.stage" >
          <label *ngSwitchCase="'19'">Customer Rejected</label>
          <label *ngSwitchCase="'7'">Account Manager Rejected</label>
          <label *ngSwitchCase="'3'">Assigned</label>
          <label *ngSwitchCase="'4'">Building Store</label>
          <label *ngSwitchCase="'15'">Store Art In Progress</label>
      </ng-container>
  
      <!-- Symbol Column -->
      <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <!-- <mat-icon aria-hidden="false" aria-label="Eye">visibility</mat-icon> -->
          <button class="btn" (click)="openInfoModal(element)">
            <mat-icon aria-hidden="false" aria-label="notes" *ngIf="element.stage == 7 || element.stage == 19">assignment</mat-icon>
          </button>
        </td>
      </ng-container>
      
      <ng-container matColumnDef="symbol1">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <!-- <mat-icon aria-hidden="false" aria-label="Eye">visibility</mat-icon> -->
          <button mat-raised-button color="primary" (click)="onCellClick(element)">
            View Store
          </button>

        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
    </table>
  </div>

  <div class="modal fade" id="rejectionInfoModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5>Rejection Reason</h5>
          <button type="button" class="close" (click)="closeInfoModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div *ngFor="let item of selectedRejectionCodes">
            <label>
              {{item.code}}
            </label>
          </div>  
          <form [formGroup]="storeRejectionForm">
            
            <!-- <mat-form-field style="width: 100%;">
              <mat-label>Reason</mat-label>
              <mat-select formControlName="amRejectionCodes" multiple>
                <mat-option disabled *ngFor="let reason of rejectionCodes" [value]="reason.id">{{reason.code}}</mat-option>
              </mat-select>
            </mat-form-field> -->
            <br>
            <mat-form-field style="width: 100%;">
              <mat-label>Comment</mat-label>
              <textarea readonly matInput formControlName="amRejectionText"></textarea>
            </mat-form-field>
          </form>
        </div>
      </div>
    </div>
  </div>
  